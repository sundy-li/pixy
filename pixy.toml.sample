# Pixy configuration sample
# Copy to ~/.pixy/pixy.toml and replace API keys/models as needed.

theme = "dark"
transport_retry_count = 5
skills = ["~/.agents/skills"]

[env]
OPENAI_API_KEY = "sk-..."
ANTHROPIC_API_KEY = "sk-ant-..."
TELEGRAM_BOT_TOKEN = "1234567890:replace-with-telegram-bot-token"
FEISHU_APP_ID = "cli_xxx"
FEISHU_APP_SECRET = "replace-with-feishu-secret"
FEISHU_VERIFICATION_TOKEN = "replace-with-feishu-verification-token"

[log]
# Log directory for pixy and gateway.
path = "~/.pixy/logs/"
level = "info"
rotate_size_mb = 100
stdout = false

[llm]
# "*" routes by provider weights; use a provider name to pin.
default_provider = "openai"

# Minimal default provider.
[[llm.providers]]
name = "openai"
kind = "chat"
provider = "openai"
api = "openai-responses"
base_url = "https://api.openai.com/v1"
api_key = "$OPENAI_API_KEY"
model = "gpt-5.3-codex"
weight = 100
reasoning = true
reasoning_effort = "high"
context_window = 200000
max_tokens = 4096

# Optional secondary provider for weighted routing.
[[llm.providers]]
name = "anthropic"
kind = "chat"
provider = "anthropic"
api = "anthropic-messages"
base_url = "https://api.anthropic.com/v1"
api_key = "$ANTHROPIC_API_KEY"
model = "claude-3-5-sonnet-latest"
weight = 0

# Embedding providers can coexist, but are ignored by chat session routing.
[[llm.providers]]
name = "openai_embedding"
kind = "embedding"
provider = "openai"
api = "openai-responses"
base_url = "https://api.openai.com/v1"
api_key = "$OPENAI_API_KEY"
model = "text-embedding-3-small"
weight = 0

[gateway]
enabled = true
bind = "0.0.0.0:8080"
request_timeout_ms = 20000

[[gateway.channels]]
name = "tg-main"
kind = "telegram"
enabled = true
bot_token = "$TELEGRAM_BOT_TOKEN"
# Optional per-channel proxy, supports http/socks5.
# proxy_url = "socks5://127.0.0.1:7891"
mode = "polling"
poll_interval_ms = 1500
update_limit = 50
allowed_user_ids = ["replace-with-telegram-user-id"]

[[gateway.channels]]
name = "feishu-main"
kind = "feishu"
enabled = false
mode = "webhook"
app_id = "$FEISHU_APP_ID"
app_secret = "$FEISHU_APP_SECRET"
verification_token = "$FEISHU_VERIFICATION_TOKEN"
# Optional per-channel proxy, supports http/socks5.
# proxy_url = "http://127.0.0.1:7890"
poll_interval_ms = 100
allowed_user_ids = ["replace-with-feishu-open-id"]
